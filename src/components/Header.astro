---
import { SITE } from "@constants";
import { getLangFromUrl, useTranslations } from "@i18n/utils";

import Container from "@components/Container.astro";

const currentPath = Astro.url.pathname;
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const langPrefix = lang === "id" ? "/id" : "";

const navItems = [
  {
    href: `${langPrefix}/posts`,
    label: t("posts.title"),
    icon: "/icons/newspaper.svg",
  },
  {
    href: `${langPrefix}/projects`,
    label: t("projects.title"),
    icon: "/icons/rocket.svg",
  },
  {
    href: `${langPrefix}/contact`,
    label: t("contact.title"),
    icon: "/icons/contact.svg",
  },
];
---

<header>
  <Container>
    <div class='flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 sm:gap-0'>
      <a href={langPrefix || "/"} class='inline-block no-underline'>
        <div class='font-semibold text-current'>
          {SITE.NAME}
        </div>
      </a>
      <nav class='flex flex-wrap gap-3'>
        {
          navItems.map(({ href, label, icon }) => {
            const isActive =
              currentPath === href || currentPath.startsWith(`${href}/`);
            return (
              <a
                href={href}
                class={`inline-flex no-underline w-fit items-center gap-2 px-3 py-1.5 flex-nowrap rounded border transition-colors duration-300 ease-in-out ${
                  isActive
                    ? "bg-white/10 text-white border-white/20"
                    : "hover:bg-white/5 hover:text-white border-transparent"
                }`}
              >
                <img src={icon} alt='' class='w-4 h-4' />
                {label}
              </a>
            );
          })
        }
      </nav>
    </div>
  </Container>
</header>
